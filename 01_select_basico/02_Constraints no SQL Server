# Constraints no SQL Server

## ðŸŽ¯ Objetivo
Aprender como aplicar regras de integridade nos dados atravÃ©s das constraints (restriÃ§Ãµes). Elas impedem inserÃ§Ãµes ou atualizaÃ§Ãµes invÃ¡lidas, preservando a qualidade e consistÃªncia do banco.

---

## ðŸ“˜ Tipos de Constraints

# ðŸ” Constraints no SQL Server â€” Guia Completo

As *constraints* (restriÃ§Ãµes) sÃ£o regras aplicadas Ã s colunas das tabelas para garantir a integridade, consistÃªncia e validade dos dados. Elas previnem inserÃ§Ãµes e atualizaÃ§Ãµes incorretas.

---

## ðŸ”‘ PRIMARY KEY

| CaracterÃ­sticas                              |
|---------------------------------------------|
| - Identifica unicamente cada linha da tabela |
| - NÃ£o permite valores `NULL`                 |
| - NÃ£o permite valores duplicados             |

ðŸ“Œ Uma tabela sÃ³ pode ter **uma** `PRIMARY KEY`, mas ela pode ser **composta por mÃºltiplas colunas**.

```sql
CREATE TABLE Clientes (
  ClienteID INT PRIMARY KEY,
  Nome VARCHAR(100)
);


-- Chave primÃ¡ria composta
CREATE TABLE Vendas (
  ClienteID INT,
  ProdutoID INT,
  PRIMARY KEY (ClienteID, ProdutoID)
);


CREATE TABLE Pedidos (
  PedidoID INT PRIMARY KEY,
  ClienteID INT,
  FOREIGN KEY (ClienteID) REFERENCES Clientes(ClienteID)
);


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
##  UNIQUE
CREATE TABLE Funcionarios (
  FuncID INT PRIMARY KEY,
  CPF VARCHAR(11) UNIQUE
);


-- Adicionando depois
ALTER TABLE Funcionarios ADD CONSTRAINT CPF_Unico UNIQUE (CPF);

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
##  CHECK

CREATE TABLE Produtos (
  ProdutoID INT PRIMARY KEY,
  Preco DECIMAL(10,2),
  CHECK (Preco > 0)
);


-- Exemplo com mÃºltiplos CHECKs
CREATE TABLE Alunos (
  ID INT PRIMARY KEY,
  Idade INT CHECK (Idade >= 0 AND Idade <= 120),
  Nota DECIMAL(4,2) CHECK (Nota >= 0 AND Nota <= 10)
);

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## DEFAULT

CREATE TABLE Produtos (
  ProdutoID INT PRIMARY KEY,
  Estoque INT DEFAULT 0,
  DataCadastro DATE DEFAULT GETDATE()
);

-- Adicionando depois
ALTER TABLE Clientes ADD CONSTRAINT Nome_Unico UNIQUE (Nome);

-- Removendo constraint
ALTER TABLE Clientes DROP CONSTRAINT Nome_Unico;

-- Renomeando constraint (exige DROP e ADD)
ALTER TABLE Clientes DROP CONSTRAINT Nome_Unico;
ALTER TABLE Clientes ADD CONSTRAINT Nome_Unico_Novo UNIQUE (Nome);

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

ðŸ§  Boas PrÃ¡ticas com Constraints
âœ… Sempre defina uma PRIMARY KEY
âœ… Nomeie suas constraints para facilitar manutenÃ§Ã£o (FK_Pedidos_Clientes, CK_Produto_PrecoPositivo)
âœ… Use CHECK para validar faixas ou condiÃ§Ãµes (ex: idade mÃ­nima, estoque â‰¥ 0)
âœ… FOREIGN KEY mantÃ©m integridade entre tabelas relacionadas
âœ… DEFAULT evita campos nulos indesejados em colunas padrÃµes
